<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>obfusimg Web</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="wrap">
    <h1>obfusimg Web</h1>
    <p class="subtitle">Minimal browser version of the C++ pixel-obfuscation tool (Gilbert/Hilbert-like + chaotic permutations).</p>

    <section class="panel controls">
      <label>
        <span>Image</span>
        <input id="fileInput" type="file" accept="image/png,image/jpeg,image/jpg" />
      </label>

      <label>
        <span>Algorithm</span>
          <select id="algorithmSelect">
            <option value="0">0 — Compact Hilbert/Gilbert obfuscation</option>
            <option value="1">1 — Invert compact Hilbert/Gilbert</option>
            <!-- <option value="2">2 — Exact Gilbert path shift (Fanqie-compatible encrypt)</option> -->
            <option value="3">3 — Invert exact Gilbert path shift (小番茄-compatible)</option>
            <option value="4">4 — Chaos (tent map) obfuscation</option>
            <option value="5">5 — Invert chaos (tent map)</option>
          </select>
      </label>

      <label>
        <span>Seed (chaos only)</span>
        <input id="seedInput" type="number" step="any" value="0.134554312" />
        <!-- 雨上がりの虹も -->
      </label>

      <div class="buttons">
        <button id="runBtn">Run</button>
        <button id="swapBtn" type="button">Use output as input</button>
        <button id="downloadBtn" type="button">Download</button>
      </div>

      <div id="status" class="status">Load an image to begin.</div>
    </section>

    <section class="grid">
      <div class="panel">
        <h2>Input</h2>
        <canvas id="inputCanvas"></canvas>
      </div>
      <div class="panel">
        <h2>Output</h2>
        <canvas id="outputCanvas"></canvas>
      </div>
    </section>

    <details class="panel notes">
      <summary>Notes</summary>
      <ul>
        <li>All processing is done locally in your browser. No data is uploaded to any server.</li>
        <li>Replicates the C++ project’s core algorithms in JavaScript.</li>
        <li>Supports decryption of <a href=https://xfqtphx.netlify.app/>小番茄图片混淆</a>. (Note that we kindly suppress encryption and direct users to the other site.)</li>
        <li>Downloaded output preserves input format.</li>
      </ul>
    </details>
  </main>

  <script src="app.js"></script>
</body>
</html>
